#%Module WRF-4.0

package require flavours
flavours init

# Load in existing modules (if required)
module load intelmpi/2019.4.243
module load netcdf/4.6.3
module load intel/19.0.4
module load hdf5/1.10.5

# Set new environment variables here
set version 4.0
set app WRF
set WRF_ROOT /nobackup/earwrfa_software/WRFv4
set NETCDF=$(nc-config --prefix)
set WRF_CHEM=0
set OMP_STACKSIZE=4G
set OMP_NUM_THREADS=1
set I_MPI_HYDRA_TOPOLIB=ipl
set HDF5=/apps/developers/libraries/hdf5/1.8.21/1/intel-19.0.4-intelmpi-20
19.4.243

# Prepend WRF and WPS paths and dependencies to existing environment
prepend-path PATH $WRF_ROOT/main/

proc ModulesHelp { } {
        global version

        puts stderr "   This module loads an environment for users to run a prebuilt ncl"
        puts stderr "                  ncl version 6.5.0                                "
        puts stderr "   Stored at /home/home02/earwrf/ncl_ncarg-6.5.0-CentOS7.5"
        puts stderr "
        Version $version
"
}

module-whatis   "Loads an environment to enable users to run "

flavours conflict WRFCHEM
flavours cleanup
